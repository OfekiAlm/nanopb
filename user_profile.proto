syntax = "proto3";

import "validate.proto";

// Enable validation for this file
option (validate.validate) = true;

// User profile message with comprehensive validation rules
message UserProfile {
    // Username must be 3-20 characters and is required
    string username = 1 [
        (validate.rules).string.min_len = 3,
        (validate.rules).string.max_len = 20,
        (validate.rules).required = true
    ];
    
    // Age must be between 13 and 120
    int32 age = 2 [
        (validate.rules).int32.gte = 13,
        (validate.rules).int32.lte = 120
    ];
    
    // Email must contain @ symbol and be required
    string email = 3 [
        (validate.rules).string.contains = "@",
        (validate.rules).required = true
    ];
    
    // Phone number must start with + and be 10-15 characters
    string phone = 4 [
        (validate.rules).string.prefix = "+",
        (validate.rules).string.min_len = 10,
        (validate.rules).string.max_len = 15
    ];
    
    // User status must be one of the defined enum values
    enum Status {
        INACTIVE = 0;
        ACTIVE = 1;
        SUSPENDED = 2;
        PENDING = 3;
    }
    Status status = 5 [(validate.rules).enum.defined_only = true];
    
    // Score must be between 0.0 and 100.0
    float score = 6 [
        (validate.rules).float.gte = 0.0,
        (validate.rules).float.lte = 100.0
    ];
    
    // Tags array with validation
    repeated string tags = 7 [
        (validate.rules).repeated.min_items = 1,
        (validate.rules).repeated.max_items = 5,
        (validate.rules).repeated.unique = true
    ];
    
    // Optional bio with length limit
    string bio = 8 [
        (validate.rules).string.max_len = 500
    ];
}
