/* Test repeated message field validation rules */

syntax = "proto3";

import "validate.proto";
import "nanopb.proto";

option (validate.validate) = true;

/* Simple submessage for testing */
message Person {
    string name = 1 [
        (nanopb).max_size = 64,
        (validate.rules).string.min_len = 1
    ];
    int32 age = 2 [
        (validate.rules).int32.gte = 0,
        (validate.rules).int32.lte = 150
    ];
}

/* Message with repeated submessages using static array */
message Team {
    string team_name = 1 [(nanopb).max_size = 64];
    
    /* Repeated submessage with validation */
    repeated Person members = 2 [
        (nanopb).max_count = 10,
        (validate.rules).repeated = {
            min_items: 1
            max_items: 5
        }
    ];
}

/* Message with callback-based repeated submessages */
message Organization {
    string org_name = 1 [(nanopb).max_size = 128];
    
    /* Callback-based repeated submessage */
    repeated Person employees = 2 [
        (nanopb).type = FT_CALLBACK
    ];
}
